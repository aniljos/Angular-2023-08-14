{"ast":null,"code":"var _class;\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { interval, BehaviorSubject } from 'rxjs';\nimport { filter, map, take, tap, debounceTime } from 'rxjs/operators';\nimport { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SearchComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1);\n  }\n}\nexport class SearchComponent {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.results = [];\n    //interval create a observable with an infinite sequesce of numbers\n    // subscribe to get the output\n    interval(1000).pipe(take(10),\n    // to pick the first 10\n    tap(value => console.log(\"in tap\", value)),\n    // view the value\n    //filter(v => v % 2 === 0),\n    filter(function (v) {\n      return v % 2 === 0;\n    }), map(v => v * v));\n    // .subscribe((result) => {\n    //   console.log(\"in subscribe\", result);\n    // });\n    this.formGroup = new FormGroup({\n      search: new FormControl(\"\", [], [])\n    });\n    this.formGroup.get(\"search\")?.valueChanges.pipe(debounceTime(1000)).subscribe(input => {\n      //console.log(\"input\", input);\n      const url = \"https://en.wikipedia.org/w/api.php\";\n      const params = new HttpParams().set(\"action\", \"opensearch\").set(\"limit\", 20).set(\"origin\", \"*\").set(\"search\", input);\n      // httpClient\n      //     .get(url, {params, observe: 'response'})\n      //     .subscribe((data) => {\n      //       console.log(data);\n      // })\n      httpClient.get(url, {\n        params,\n        observe: 'body'\n      }).pipe(map(data => data[1])).subscribe(data => {\n        console.log(data);\n        this.results = data;\n      });\n      this.results$ = httpClient.get(url, {\n        params,\n        observe: 'body'\n      }).pipe(map(data => data[1]));\n    });\n    //const subject = new Subject<number>();\n    //const subject = new ReplaySubject<number>();\n    const subject = new BehaviorSubject();\n    subject.subscribe(result => {\n      console.log(\"subscriber #1\", result);\n    });\n    subject.next(10);\n    subject.next(20);\n    subject.next(30);\n    subject.subscribe(result => {\n      console.log(\"subscriber #2\", result);\n    });\n    subject.next(40);\n    subject.next(50);\n  }\n}\n_class = SearchComponent;\n_class.ɵfac = function SearchComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-search\"]],\n  decls: 6,\n  vars: 4,\n  consts: [[3, \"formGroup\"], [\"type\", \"search\", \"placeholder\", \"Wiki Search\", \"formControlName\", \"search\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function SearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h4\");\n      i0.ɵɵtext(1, \"Wiki Search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵelement(3, \"input\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, SearchComponent_div_4_Template, 3, 1, \"div\", 2);\n      i0.ɵɵpipe(5, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 2, ctx.results$));\n    }\n  },\n  dependencies: [i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,gBAAgB;AACvD,SAAQC,QAAQ,EAAsCC,eAAe,QAAO,MAAM;AAClF,SAAQC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAEC,GAAG,EAAEC,YAAY,QAAO,gBAAgB;AACnE,SAAoBC,UAAU,QAAO,sBAAsB;;;;;;;ICO3DC,2BAA2C;IACpCA,YAAQ;IAAAA,iBAAI;;;;IAAZA,eAAQ;IAARA,6BAAQ;;;ADDf,OAAM,MAAOC,eAAe;EAM1BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IAHvB,YAAO,GAAkB,EAAE;IAKhC;IACA;IACIX,QAAQ,CAAC,IAAI,CAAC,CACXY,IAAI,CACHR,IAAI,CAAC,EAAE,CAAC;IAAE;IACVC,GAAG,CAACQ,KAAK,IAAIC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,KAAK,CAAC,CAAC;IAAE;IAC5C;IACAX,MAAM,CAAC,UAASc,CAAC;MACf,OAAOA,CAAC,GAAG,CAAC,KAAI,CAAC;IACnB,CAAC,CAAC,EACFb,GAAG,CAACa,CAAC,IAAIA,CAAC,GAAGA,CAAC,CAAC,CAChB;IACD;IACA;IACA;IAGL,IAAI,CAACC,SAAS,GAAG,IAAIlB,SAAS,CAAC;MAC5BmB,MAAM,EAAE,IAAIpB,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;KACpC,CAAC;IAEF,IAAI,CAACmB,SAAS,CACNE,GAAG,CAAC,QAAQ,CAAC,EACZC,YAAY,CACbR,IAAI,CACHN,YAAY,CAAC,IAAI,CAAC,CACnB,CACAe,SAAS,CAACC,KAAK,IAAG;MACjB;MAEA,MAAMC,GAAG,GAAG,oCAAoC;MAChD,MAAMC,MAAM,GAAG,IAAIjB,UAAU,EAAE,CACRkB,GAAG,CAAC,QAAQ,EAAE,YAAY,CAAC,CAC3BA,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAChBA,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAClBA,GAAG,CAAC,QAAQ,EAAEH,KAAK,CAAC;MAE3C;MACA;MACA;MACA;MACA;MAEAX,UAAU,CACHQ,GAAG,CAAaI,GAAG,EAAE;QAACC,MAAM;QAAEE,OAAO,EAAE;MAAM,CAAC,CAAC,CAC/Cd,IAAI,CACHT,GAAG,CAACwB,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC,CAAC,CACrB,CACAN,SAAS,CAAEM,IAAI,IAAI;QAChBb,OAAO,CAACC,GAAG,CAACY,IAAI,CAAC;QACjB,IAAI,CAACC,OAAO,GAAGD,IAAI;MACvB,CAAC,CAAC;MAEV,IAAI,CAACE,QAAQ,GAAIlB,UAAU,CACNQ,GAAG,CAAaI,GAAG,EAAE;QAACC,MAAM;QAAEE,OAAO,EAAE;MAAM,CAAC,CAAC,CAC/Cd,IAAI,CACHT,GAAG,CAACwB,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC,CAAC,CACrB;IAKrB,CAAC,CAAC;IAGF;IACA;IACA,MAAMG,OAAO,GAAG,IAAI7B,eAAe,EAAU;IAE7C6B,OAAO,CAACT,SAAS,CAAEU,MAAM,IAAI;MAC3BjB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEgB,MAAM,CAAC;IACtC,CAAC,CAAC;IAEFD,OAAO,CAACE,IAAI,CAAC,EAAE,CAAC;IAChBF,OAAO,CAACE,IAAI,CAAC,EAAE,CAAC;IAChBF,OAAO,CAACE,IAAI,CAAC,EAAE,CAAC;IAEhBF,OAAO,CAACT,SAAS,CAAEU,MAAM,IAAI;MAC3BjB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEgB,MAAM,CAAC;IACtC,CAAC,CAAC;IAEFD,OAAO,CAACE,IAAI,CAAC,EAAE,CAAC;IAChBF,OAAO,CAACE,IAAI,CAAC,EAAE,CAAC;EAIxB;;SA9FSvB,eAAe;;mBAAfA,MAAe;AAAA;;QAAfA,MAAe;EAAAwB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX5B7B,0BAAI;MAAAA,2BAAW;MAAAA,iBAAK;MAEpBA,8BAA6B;MACzBA,2BAAyE;MAC7EA,iBAAM;MAONA,gEAEM;;;;MAXDA,eAAuB;MAAvBA,yCAAuB;MASNA,eAAmB;MAAnBA,4DAAmB","names":["FormControl","FormGroup","interval","BehaviorSubject","filter","map","take","tap","debounceTime","HttpParams","i0","SearchComponent","constructor","httpClient","pipe","value","console","log","v","formGroup","search","get","valueChanges","subscribe","input","url","params","set","observe","data","results","results$","subject","result","next","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Applications\\Angular\\Timins\\the-awesome-app\\src\\app\\search\\search.component.ts","D:\\Applications\\Angular\\Timins\\the-awesome-app\\src\\app\\search\\search.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {interval, Observable, ReplaySubject, Subject, BehaviorSubject} from 'rxjs';\nimport {filter, map, take, tap, debounceTime} from 'rxjs/operators';\nimport {HttpClient, HttpParams} from '@angular/common/http';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})\nexport class SearchComponent {\n\n  public formGroup: FormGroup;\n  public results: Array<string> = [];\n  public results$!: Observable<Array<string>>;\n\n  constructor(private httpClient: HttpClient){\n\n    //interval create a observable with an infinite sequesce of numbers\n    // subscribe to get the output\n        interval(1000)\n          .pipe(\n            take(10), // to pick the first 10\n            tap(value => console.log(\"in tap\", value)), // view the value\n            //filter(v => v % 2 === 0),\n            filter(function(v){\n              return v % 2 ===0\n            }),\n            map(v => v * v)\n          )\n          // .subscribe((result) => {\n          //   console.log(\"in subscribe\", result);\n          // });\n\n\n     this.formGroup = new FormGroup({\n        search: new FormControl(\"\", [], [])\n     });    \n\n     this.formGroup\n            .get(\"search\")\n            ?.valueChanges\n            .pipe(\n              debounceTime(1000)\n            )\n            .subscribe(input => {\n              //console.log(\"input\", input);\n\n              const url = \"https://en.wikipedia.org/w/api.php\";\n              const params = new HttpParams()\n                                    .set(\"action\", \"opensearch\")\n                                    .set(\"limit\", 20)\n                                    .set(\"origin\", \"*\")\n                                    .set(\"search\", input);\n\n              // httpClient\n              //     .get(url, {params, observe: 'response'})\n              //     .subscribe((data) => {\n              //       console.log(data);\n              // })\n\n              httpClient\n                    .get<Array<any>>(url, {params, observe: 'body'})\n                    .pipe(\n                      map(data => data[1])\n                    )\n                    .subscribe((data) => {\n                        console.log(data);\n                        this.results = data;\n                    })\n\n            this.results$ =  httpClient\n                                .get<Array<any>>(url, {params, observe: 'body'})\n                                .pipe(\n                                  map(data => data[1])\n                                );\n                   \n\n\n\n            })\n\n  \n            //const subject = new Subject<number>();\n            //const subject = new ReplaySubject<number>();\n            const subject = new BehaviorSubject<number>();\n\n            subject.subscribe((result) => {\n              console.log(\"subscriber #1\", result)\n            });\n\n            subject.next(10);\n            subject.next(20);\n            subject.next(30);\n\n            subject.subscribe((result) => {\n              console.log(\"subscriber #2\", result)\n            });\n\n            subject.next(40);\n            subject.next(50);\n\n\n  \n    }\n}\n","<h4>Wiki Search</h4>\n\n<div [formGroup]=\"formGroup\">\n    <input type=\"search\" placeholder=\"Wiki Search\" formControlName=\"search\"/>\n</div>\n\n\n<!-- <div *ngFor=\"let item of results\">\n    <p>{{item}}</p>\n</div> -->\n\n<div *ngFor=\"let item of results$ | async\">\n    <p>{{item}}</p>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}